---
import { Image } from "astro:assets";

interface Section {
  title: string;
  content: string;
  image: string;
  alt: string;
}

const restaurantImages = import.meta.glob<{ default: ImageMetadata }>(
  '../../assets/restaurante/*.webp',
  { eager: true }
);

const currentLocale = Astro.currentLocale || 'es';

const restaurantDataEs = import.meta.glob<any>('../../content/restaurant-info.md', { eager: true });
const restaurantDataEn = import.meta.glob<any>('../../content/restaurant-info-en.md', { eager: true });

const restaurantData = currentLocale === 'en'
  ? Object.values(restaurantDataEn)[0]
  : Object.values(restaurantDataEs)[0];

const { frontmatter } = restaurantData;
const sections = frontmatter.sections as Section[];

function getImage(path: string): ImageMetadata {
  const filename = path.split('/').pop();
  const key = `../../assets/restaurante/${filename}`;
  return restaurantImages[key]?.default;
}
---

<div class="w-[85%] restaurant-info">
  {
    sections.map((section) => (
      <div class="info-item flex max-md:flex-wrap items-center justify-center gap-[50px]">
        <div class="w-[50%] xl:w-[590px] max-md:w-[90%] flex justify-center items-center">
          <div class="texto p-[17px] w-[100%]">
            <p class="text-letra text-start text-gray-500 text-[15.6px]">
              {section.content}
            </p>
          </div>
        </div>
        <div class="xl:w-[490px] flex justify-center items-center">
          <Image
            src={getImage(section.image)}
            alt={section.alt}
            loading="lazy"
            width={490}
            height={350}
          />
        </div>
      </div>
    ))
  }
</div>

<style>
  .info-item {
    margin-bottom: 45px;
  }
  .text-letra {
    font-family: var(--font-family-poppins);
  }
  .info-item:nth-child(even) {
    flex-direction: row-reverse;
  }
  .info-item:nth-child(even) .texto {
    border-top: 1px solid #d4af37;
    border-left: 1px solid #d4af37;
  }
  .info-item:nth-child(odd) .texto {
    border-bottom: 1px solid #d4af37;
    border-right: 1px solid #d4af37;
  }
</style>